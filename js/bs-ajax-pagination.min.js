!function(e){"use strict";function a(a){if((a=void 0===a||a)&&e(window).scroll(),document.createEvent){var t=document.createEvent("Event");t.initEvent("resize",!0,!0),window.dispatchEvent(t)}else{var n=document.documentElement,i=document.createEventObject();n.fireEvent("onresize",i)}}function t(a){return this.prefix="bs_ajax_paginate_",this.deferredPrefix="bs_deferred_loading_",this.isPrevPage=!1,this.$link_el=!1,this.id=!1,this.paginationStyle=!1,this.settings=e.extend({afterSuccessDeferredAjax:function(){}},a),this}var n,i={},s={};t.prototype.init=function(a){var t=this;e(a).on("click",".bs-ajax-pagination a",function(a){a.preventDefault();var i=e(this),s=i.parent();if(i.hasClass("disabled")||s.hasClass("bs-pagination-loading"))return!1;s.addClass("bs-pagination-loading");var r=i.closest(".bs-pagination");t.$link_el=i,t.id=i.data("id");try{if(!t.id)throw"invalid element";t.setNewPageNumber(),t.paginationStyle=t.getPaginationStyle();var o=t.getAjaxProps(),d=r.prevAll(".bs-pagination-wrapper"),l=t.cache_get(o.current_page,t.id);if("object"==typeof l)d.addClass("bs-pagination-cached"),t.handle_response(l),s.removeClass("bs-pagination-loading");else{switch(d.removeClass("bs-pagination-cached"),2==o.current_page&&t.cache_add(1,{output:d.html(),label:r.find(".bs-pagination-label").html(),have_next:!0,have_prev:!1},t.id),t.paginationStyle){case"next_prev":d.children().addClass("bs-pagination-in-loading"),d.prepend(t.getLoadingRawHtml());break;case"more_btn_infinity":i.find(".loaded").hide(),i.find(".loading").show(),i.removeClass("more_btn_infinity").addClass("infinity").addClass("bs-pagination-in-loading"),r.removeClass("more_btn_infinity").addClass("infinity");break;case"infinity":case"more_btn":i.addClass("bs-pagination-in-loading"),i.find(".loaded").hide(),i.find(".loading").show()}n=e.ajax({url:o.ajax_url,type:"POST",dataType:"json",data:o}).fail(function(e){switch(s.removeClass("bs-pagination-loading"),t.paginationStyle){case"more_btn_infinity":case"next_prev":d.find(".bs-pagin-loading-wrapper").remove(),i.addClass("bs-pagination-in-loading");break;case"infinity":case"more_btn":i.addClass("bs-pagination-in-loading"),i.find(".loaded").show(),i.find(".loading").hide()}"abort"!==e.statusText&&alert("cannot load data. please check your internet connection!")}).done(function(e){switch(t.handle_response(e),t.cacheThisStyle(t.paginationStyle)&&t.cache_add(o.current_page,e,t.id),t.paginationStyle){case"more_btn_infinity":i.removeClass("bs-pagination-in-loading"),d.find(".bs-pagin-loading-wrapper").remove();break;case"next_prev":i.removeClass("bs-pagination-in-loading"),d.find(".bs-pagin-loading-wrapper").remove(),d.children().removeClass("bs-pagination-in-loading");break;case"infinity":case"more_btn":i.removeClass("bs-pagination-in-loading"),i.find(".loaded").show(),i.find(".loading").hide()}s.removeClass("bs-pagination-loading")})}}catch(e){t.debug(e)}}),new OnScreen({tolerance:0,debounce:100,container:window}).on("enter",".bs-ajax-pagination.infinity",function(a){e(a).find("a").click()})},t.prototype.filter_slider_params=function(e){return void 0!==e.autoplayspeed&&(e.autoplaySpeed=e.autoplayspeed),e.dots=void 0!==e.sliderControlDots&&"off"!==e.sliderControlDots,e.autoplay=void 0!==e.sliderAutoplay&&parseInt(e.sliderAutoplay),e.speed=e.sliderAnimationSpeed,void 0!==e.sliderControlNextPrev&&"off"==e.sliderControlNextPrev&&(e.appendArrows=!1),e},t.prototype.handler_slider=function(t){var n=this;e.fn.slick&&(e(".bs-slider-items-container",t).each(function(){var a=e(this),t=e(document.body).hasClass("rtl");if(!a.hasClass("slick-ready")){var i=a.data(),s=n.filter_slider_params(e.extend({sliderControlDots:"off",prevArrow:'<a class="btn-bs-pagination prev" rel="prev" title="Previous">\n\t\t\t<i class="fa fa-angle-'+(t?"right":"left")+'" aria-hidden="true"></i>\n\t\t</a>',nextArrow:'<a rel="next" class="btn-bs-pagination next" title="Next">\n\t\t\t<i class="fa fa-angle-'+(t?"left":"right")+'" aria-hidden="true"></i>\n\t\t</a>',rtl:e(document.body).hasClass("rtl"),slideMargin:25,slide:".bs-slider-item",appendArrows:a.find(".bs-slider-controls .bs-control-nav"),classPrefix:"bs-slider-",dotsClass:"bs-slider-dots",customPaging:function(a,t){return e('<span class="bts-bs-dots-btn"></span>').text(t+1)}},i));s.sliderControlDots&&i.sliderControlDots&&(s.appendDots=a.find(".bs-slider-controls"),s.dotsClass+=" "+s.dotsClass+"-"+i.sliderControlDots),a.slick(s),a.addClass("slick-ready")}}),e(".multi-tab").on("shown.bs.tab",'a[data-toggle="tab"]:not([data-deferred-init])',function(t){var n=e(t.target).attr("href");e(n).find(".bs-slider-items-container").slick("setPosition"),a()}))},t.prototype.refreshLazyImages=function(){"object"==typeof bsLazy&&bsLazy.revalidate()},t.prototype.bindDeferredEvents=function(t){var n=200,i=this,s=0;e(".multi-tab",t).on("show.bs.tab","a[data-deferred-init]",function(a){var t=e(this).closest(".multi-tab").find(".active").attr("href");n=e(t).height()}),e(".tabs-section",t).on("show.bs.tab","a[data-deferred-init]",function(a){var t=e(this).closest(".tabs-section").find(".active:visible a").data("target"),i=e(t);n=i.height()}).on("show.bs.tab","a",function(){i.refreshLazyImages();var a=e(this).closest(".tabs-section").find(".active:visible a").data("target"),t=e(a),n=t.outerHeight();if(n){var r=t.closest(".tab-content");if(r.length){var o=Math.max(n,parseInt(r.outerHeight()));o=Math.max(o,s),r.css("min-height",o).data("bs-height",o),s=o}}}),e("a[data-deferred-init]",t).each(function(t){var s=e(this),r=s.data("deferred-event")||"click";s.closest(".deferred-block-exclude").length>0||s.on(r,function(t){var s=e(this).data("deferred-init"),r=e("#bsd_"+s),o=r.closest(".bs-deferred-container");r.hasClass("bs-deferred-load-wrapper")&&(r.hasClass("bs-deferred-loaded")?a(!r.closest(".bs-pinning-block.pinned").length):(o.removeClass("bs-tab-animated"),i.handleDeferredElements(r,{loadingHeight:n||void 0},function(){o.addClass("bs-tab-animated"),r.addClass("bs-deferred-loaded");var e=o.find(".bs-pagination");!n||e.length&&!e.hasClass("next_prev")||o.css("min-height",n),n=void 0})))})})},t.prototype.handleDeferredElements=function(t,n,s){var r=this;t.hasClass("bs-deferred-load-wrapper")||(t=t.find(".bs-deferred-load-wrapper")),t.each(function(){var t=e(this);if(!t.hasClass("deferred-html-exists")){if(n=e.extend({loadingHeight:100,loadingMinHeight:0},n),!t.find(".deferred-loading-container").length){var o=e("<div></div>",{class:"deferred-loading-container",height:n.loadingHeight}),d=t.find(".bs-pagination");!n.loadingMinHeight||d&&d.hasClass("more_btn")||o.css("min-height",n.loadingMinHeight),o.append(r.getLoadingRawHtml()),o.appendTo(t)}r.id=t.attr("id");var l=r.getAjaxProps("deferred");"object"==typeof i[r.id]&&i[r.id].abort(),i[r.id]=e.ajax({url:l.ajax_url,type:"POST",dataType:"json",data:l}).done(function(e){t.find(".deferred-loading-container").remove(),delete i[r.id],t.addClass("deferred-html-exists").append(e.output),r.handler_slider(t),s&&s.call(t,e),a(!t.closest(".bs-pinning-block.pinned").length),r.settings.afterSuccessDeferredAjax.call(r,t,e)})}})},t.prototype.getLoadingRawHtml=function(){return'<div class="bs-pagin-loading-wrapper">'+bs_pagination_loc.loading+"</div>"},t.prototype.getAjaxProps=function(e){var a,t=("deferred"===(e=e||"pagination")?this.deferredPrefix:this.prefix)+this.id;if(void 0===window[t])throw"pagination settings not set";switch(a=jQuery.parseJSON(window[t]),e.toLowerCase()){case"pagination":a.action="pagination_ajax",a.current_page=this.$link_el.parent().data("current-page")||1,a.pagin_type=this.paginationStyle;break;case"deferred":a.action="deferred_loading",a.current_page=1}if(this.$link_el){var n=this.$link_el.closest(".bs-pagination").prevAll(".bs-pagination-wrapper").find(".bs-pagination-public-vars").data("id");n&&(a.__vars=jQuery.parseJSON(window["bs_ajax_paginate_vars_"+n]))}return a},t.prototype.setNewPageNumber=function(){var e=this.$link_el.parent(),a=e.data("current-page")||1;if(this.isPrevPage=this.$link_el.hasClass("prev"),this.isPrevPage){if(a<2)throw"Wrong page number!";a--}else a++;e.data("current-page",a)},t.prototype.debug=function(e){console.error(e)},t.prototype.cacheThisStyle=function(e){return"next_prev"===e},t.prototype.getPaginationStyle=function(){for(var e,a=["next_prev","more_btn","more_btn_infinity","infinity"],t=this.$link_el.closest(".bs-pagination"),n=0;n<a.length;n++)if(e=a[n],t.hasClass(e))return e;return""},t.prototype.cache_get=function(e,a){if(void 0!==s[a]&&void 0!==s[a][e])return s[a][e]},t.prototype.cache_add=function(e,a,t){void 0===s[t]&&(s[t]={}),s[t][e]=a},t.prototype.handle_event=function(e,a){if("object"!=typeof e.events)return!1;if("string"==typeof e.events[a]){var t=e.events[a];"function"==typeof window[t]&&window[t].call(this,e,a)}},t.prototype.handle_response=function(t){if(null!==t&&"string"!=typeof t.error){var n=this.$link_el.closest(".bs-pagination"),i=n.prevAll(".bs-pagination-wrapper"),s=n.closest(".bs-pinning-block.pinned").length;switch(this.handle_event(t,"before_append"),this.paginationStyle){case"next_prev":i.html(t.output),this.handle_event(t,"after_append"),i.addClass("bs-animate").addClass(this.isPrevPage?"bs-fadeInLeft":"bs-fadeInRight").delay(400).queue(function(a){e(this).removeClass("bs-animate bs-fadeInRight bs-fadeInLeft"),a()}),a(!s),void 0!==t.label&&n.find(".bs-pagination-label").html(t.label),n.find(".next")[t.have_next?"removeClass":"addClass"]("disabled"),n.find(".prev")[t.have_prev?"removeClass":"addClass"]("disabled");break;case"more_btn":case"more_btn_infinity":case"infinity":if("string"==typeof t["add-to"]){r=e(t.output);"prepend"==t["add-type"]?i.find(t["add-to"]).prepend(r):i.find(t["add-to"]).append(r)}else var r=i.append(t.output).children(":last");a(!s),this.handle_event(t,"after_append"),r.addClass("bs-animate bs-fadeInUp").delay(400).queue(function(a){e(this).removeClass("bs-animate bs-fadeInUp"),a()}),"infinity"===this.paginationStyle?t.have_next||this.$link_el.unbind("inview").remove():t.have_next?this.$link_el.removeClass("disabled"):(this.$link_el.addClass("disabled"),this.$link_el.find(".loaded").remove(),this.$link_el.find(".no-more").show())}this.refreshLazyImages(),this.handle_event(t,"after_response")}else null===t?this.debug("Error!"):this.debug(t.error)},e.fn.Better_Ajax_Pagination=function(e){return new t(e).handler_slider(),this.each(function(){(new t).init(this)})},e.fn.Better_Deferred_Loading=function(e){var a=new t(e);return a.bindDeferredEvents(e.context),a}}(jQuery);